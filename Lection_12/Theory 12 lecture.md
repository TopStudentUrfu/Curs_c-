
# –õ–µ–∫—Ü–∏—è 12: –ü–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ "–î–µ–∫–æ—Ä–∞—Ç–æ—Ä" –∏ "–ê–¥–∞–ø—Ç–µ—Ä". 

## –ü–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è - "–î–µ–∫–æ—Ä–∞—Ç–æ—Ä"

#### –ó–∞–¥–∞—á–∞
–¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±—Ö–æ–¥–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å —Ñ—Ä—É–∫—Ç–∞–º–∏:
1. **–í—Å–µ —Ñ—Ä—É–∫—Ç—ã** - –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
2. **–¢–æ–ª—å–∫–æ —Ö–æ—Ä–æ—à–∏–µ** - –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –∏—Å–ø–æ—Ä—á–µ–Ω–Ω—ã–µ
3. **–¢–æ–ª—å–∫–æ –∑–µ–ª–µ–Ω—ã–µ** - –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –Ω–µ–∑–µ–ª–µ–Ω—ã–µ
4. **–¢–æ–ª—å–∫–æ —Ö–æ—Ä–æ—à–∏–µ –∑–µ–ª–µ–Ω—ã–µ** - –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —É—Å–ª–æ–≤–∏–π

**–ü—Ä—è–º–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—é –∫–æ–¥–∞ –∏ –Ω–∞—Ä—É—à–µ–Ω–∏—é –ø—Ä–∏–Ω—Ü–∏–ø–∞ –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç–∏/–∑–∞–∫—Ä—ã—Ç–æ—Å—Ç–∏.**

### –ù–µ–±–æ–ª—å—à–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –ø–µ—Ä–µ–¥ —Ä–∞–±–æ—Ç–æ–π:

**–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –≤ Fruit —Å–¥–µ–ª–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Ñ—É–Ω–∫—Ü–∏–∏ Eat:**

- –≤ Fruit —Å–¥–µ–ª–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Ñ—É–Ω–∫—Ü–∏–∏ Eat:
```cpp
    virtual void Eat() 
	{
		if(IsGood()){
			cout << Good! << endl;
		}
		else{
			cout << Bad! << endl;
		}
		
	};
```
---
- –î–æ–±–∞–≤–∏–ª–∏ enum class —Ü–≤–µ—Ç–æ–≤
```cpp
enum class FruitColor : int 
{
	Green,
	Orange,
	Red,
	Unknown
};
```
---
–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ —è–±–ª–æ–∫–∞ –∏ –≥–æ–≤–æ—Ä–∏–º —á—Ç–æ –æ–Ω–æ –∑–µ–ª—ë–Ω–æ–µ, —Ç–∞–∫ –∂–µ –¥–ª—è –∫–∏–≤–∏ –∏ –∞–ø–µ–ª—å—Å–∏–Ω–∞
```cpp
// –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞
Apple::Apple() : Fruit(FruitColor::Green){}

Kiwi::Kiwi() : Fruit(FruitColor::Green;){}

Orange::Orange() : Fruit(FruitColor::Orange){}
```
---
–¢–∞–∫–∂–µ –≤—ã–∑–≤–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é Eat –∏–∑ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–ª–∞—Å—Å–∞ –≤ —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–Ω—ã—Ö:
```cpp
void Apple::Eat()
{
    Fruit::Eat(); // –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –≤ –±–∞–∑–æ–≤–æ–º –∫–ª–∞—Å—Å–µ
    cout << "Eating apple..." << endl;
}
void Kiwi::Eat()
{
    Fruit::Eat(); // –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –≤ –±–∞–∑–æ–≤–æ–º –∫–ª–∞—Å—Å–µ
    cout << "Eating kiwi..." << endl;
}

void Orange::Eat()
{
    Fruit::Eat(); // –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –≤ –±–∞–∑–æ–≤–æ–º –∫–ª–∞—Å—Å–µ
    cout << "Eating orange..." << endl;
}
```

### –†–µ—à–µ–Ω–∏–µ 1: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π –æ–±—Ö–æ–¥–∞

**1. –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±—Ö–æ–¥–∞ (–≤—Å–µ —Ñ—Ä—É–∫—Ç—ã):**
```cpp
// –§—É–Ω–∫—Ü–∏—è, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è "—Å—ä–µ—Å—Ç—å" –ª—é–±—ã–µ —Ñ—Ä—É–∫—Ç—ã –∏–∑ –ª—é–±–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
// –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –µ–≥–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
void EatEmAll(Iterator<Fruit*> *it)
{
    for(it->First(); !it->IsDone(); it->Next())
    {
        Fruit *currentFruit = it->GetCurrent();
        currentFruit->Eat();
    }
}
```

**2. –§—É–Ω–∫—Ü–∏—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ö–æ—Ä–æ—à–∏—Ö —Ñ—Ä—É–∫—Ç–æ–≤:**
```cpp
// –§—É–Ω–∫—Ü–∏—è, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è "—Å—ä–µ—Å—Ç—å" —Ç–æ–ª—å–∫–æ —Ö–æ—Ä–æ—à–∏–µ —Ñ—Ä—É–∫—Ç—ã
// (–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã "–≤ –ª–æ–±")
void EatEmAllGood(Iterator<Fruit*> *it)
{
    for(it->First(); !it->IsDone(); it->Next())
    {
        Fruit *currentFruit = it->GetCurrent();
        if(!currentFruit->IsGood()) continue;

        currentFruit->Eat();
    }
}
```

**3. –§—É–Ω–∫—Ü–∏—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∑–µ–ª–µ–Ω—ã—Ö —Ñ—Ä—É–∫—Ç–æ–≤:**
```cpp
// –§—É–Ω–∫—Ü–∏—è, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è "—Å—ä–µ—Å—Ç—å" —Ç–æ–ª—å–∫–æ –∑–µ–ª–µ–Ω—ã–µ —Ñ—Ä—É–∫—Ç—ã
// (–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã "–≤ –ª–æ–±")
void EatEmAllGreen(Iterator<Fruit*> *it)
{
    for(it->First(); !it->IsDone(); it->Next())
    {
        Fruit *currentFruit = it->GetCurrent();
        if(currentFruit->GetColor() != FruitColor::Green) continue;

        currentFruit->Eat();
    }
}
```

**4. –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è:**
```cpp
void EatEmAllGoodGreen(Iterator<Fruit*> *it) {
    for(it->First(); !it->IsDone(); it->Next()) {
        Fruit *currentFruit = it->GetCurrent();
        if(!currentFruit->IsGood()) continue;
        if(currentFruit->GetColor() != FruitColor::Green) continue;
        currentFruit->Eat();
    }
}
```

### –†–µ—à–µ–Ω–∏–µ: –ü–∞—Ç—Ç–µ—Ä–Ω "–î–µ–∫–æ—Ä–∞—Ç–æ—Ä"
–î–µ–∫–æ—Ä–∞—Ç–æ—Ä - —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω, –∫–æ—Ç–æ—Ä—ã–π:
1. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ–±—ä–µ–∫—Ç–∞–º
2. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≥–∏–±–∫—É—é –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞

> –î–µ–∫–æ—Ä–∞—Ç–æ—Ä-–∫–ª–∞—Å—Å –æ–±–æ—Ä–∞—á–∏–≤–∞—é—â–∏–π—Å—è –≤–æ–∫—Ä—É–≥ –∫–ª–∞—Å—Å–∞ –∏ –º–µ–Ω—è–µ—é—â–∏–π –µ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞, –µ–≥–æ –∏–Ω—Ç—Ä–µ—Ñ–µ–π—Å –ø–æ–ª–Ω–æ—Å—Ç—å —Å–æ–≤–ø–∞–¥–∞–µ—Ç 
–ù–∞–ø—Ä–∏–º–µ—Ä: —Ñ—É–Ω–∫—Ü–∏—è first, –µ—Å–ª–∏ —Ö–æ—Ç–∏–º —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫ —á—Ç–æ–±—ã –≤—ã–≤–æ–≤–¥–∏–ª–æ —Ç–æ–ª—å–∫–æ –∑–µ–ª—ë–Ω—ã–µ, —Ç–æ –ø—Ä—ã–≥–∞—Ç—å –ø–æ–∫–∞ –Ω–µ –ø–æ—è–≤–∏—Ç—Å—è –ø–µ—Ä–≤—ã–π –∑–µ–ª—ë–Ω—ã–π
		  
### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–≤
#### 1. –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞
```cpp
template<typename T> 
class IteratorDecorator : public Iterator<T>
{
protected:
	Iterator<T> *It;(—Ç–æ —á—Ç–æ —Å–¥–µ–ª–∞–ª–∞–∏ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–Ω–∫–∞–ø—Å—é–ª—è—Ü–∏—è(–≤–ª–æ–∂–∏–ª–∏ –≤–Ω—É—Ç—Ä—å))
public:
	IteratorDecorator(Iterator<T> *it) : It(it) {} // –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
	virtual ~IteratorDecorator() (delete It; )
	virtual void First() { It->First(); }
	virtual void Next() { It->Next(); }
	virtual bool IsDone() const { return It->IsDone(); }
	virtual T GetCurrent() const { return It->GetCurrent(); }
	
};
```
#### 2. –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã
**–î–µ–∫–æ—Ä–∞—Ç–æ—Ä –ø–æ —Ü–≤–µ—Ç—É:**
```cpp
class FruitColorDecorator : public  IteratorDecorator<class Fruit*> 
{
private: 
	FruitColor TargetColor;
public:
	FruitColorDecorator(Iterator<Fruit*> *it, FruitColor color) //–Ω–∞–ø–∏—Å–∞–ª–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
	: TargetColor(color), IteratorDecorator<Fruit*>(it) {}
	
	void First() override 
	{
		It->First(); —Å–Ω–∞—á–∞–ª–∞ –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–∫–Ω—Ü–∏—é —Ñ–µ—Ä—Å—Ç –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞
		while(!It->IsDone() && It->GetCurrent()->GetColor() != TargetColor)
		{
			It->Next();
		}
	}
	
	void Next() override 
	{
		do
		{
			It->Next();
			
		}while(!It->IsDone() && It->GetCurrent()->GetColor() != TargetColor):
	}
};
```

**–î–µ–∫–æ—Ä–∞—Ç–æ—Ä –ø–æ –∫–∞—á–µ—Å—Ç–≤—É:**
```cpp
class FruitGoodDecorator : public IteratorDecorator<class Fruit*>
{
private:
    bool TargetGood;

public:
    FruitGoodDecorator(Iterator<Fruit*> *it, bool isGood)
    : IteratorDecorator<Fruit*>(it), TargetGood(isGood) {}

    void First()
    {
        It->First();
        while(!It->IsDone() && It->GetCurrent()->IsGood() != TargetGood)
        {
            It->Next();
        }
    }

    void Next()
    {
        do
        {
            It->Next();

        } while(!It->IsDone() && It->GetCurrent()->IsGood() != TargetGood);
    }
};
```


### –†–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±—Ö–æ–¥–∞

**–í—Å–µ —Ñ—Ä—É–∫—Ç—ã:**
```cpp
Iterator<Fruit*> *baseIt = new ArrayIterator<Fruit*>(&fruitArray);
EatEmAll(baseIt);
delete baseIt;
```

**–¢–æ–ª—å–∫–æ —Ö–æ—Ä–æ—à–∏–µ —Ñ—Ä—É–∫—Ç—ã:**
```cpp
Iterator<Fruit*> *goodIt = new FruitGoodDecorator(
    new ArrayIterator<Fruit*>(&fruitArray), 
    true
);
EatEmAll(goodIt);
delete goodIt;
```

**–¢–æ–ª—å–∫–æ –∑–µ–ª–µ–Ω—ã–µ —Ñ—Ä—É–∫—Ç—ã:**
```cpp
Iterator<Fruit*> *greenIt = new FruitColorDecorator(
    new ArrayIterator<Fruit*>(&fruitArray),
    FruitColor::Green
);
EatEmAll(greenIt);
delete greenIt;
```

**–¢–æ–ª—å–∫–æ —Ö–æ—Ä–æ—à–∏–µ –∑–µ–ª–µ–Ω—ã–µ:**
```cpp
Iterator<Fruit*> *comboIt = new FruitColorDecorator(
    new FruitColorDecorator(
        new ArrayIterator<Fruit*>(&fruitArray),
        true
    ),
    FruitColor::Green
);
EatEmAll(comboIt);
delete comboIt;
```

### üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ "–î–µ–∫–æ—Ä–∞—Ç–æ—Ä"

1. **–ì–∏–±–∫–æ—Å—Ç—å –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**:
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ü–µ–ø–æ—á–∫–∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤
   - –ö–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤ runtime

2. **–°–æ–±–ª—é–¥–µ–Ω–∏–µ OCP**:
   - –ù–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞
   - –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–π –∏—Ç–µ—Ä–∞—Ç–æ—Ä

3. **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è**:
   - –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–∞ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ

4. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å**:
   - –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º –∫–∞–∫ —Å –æ–±—ã—á–Ω—ã–º –∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–º
   - –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ


## –ü–∞—Ç—Ç–µ—Ä–Ω "–ê–¥–∞–ø—Ç–µ—Ä"

#### –ü—Ä–æ–±–ª–µ–º–∞
–í –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–≤–∞ —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
1. –ö–∞—Å—Ç–æ–º–Ω—ã–π `ArrayClass`
2. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `list` –∏–∑ STL

–£ –Ω–∏—Ö —Ä–∞–∑–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –∏—Ç–µ—Ä–∞—Ü–∏–∏:
```cpp
// –ö–∞—Å—Ç–æ–º–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
Iterator<Fruit*>* it = fruitArray.GetIterator();

// STL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
auto it = fruitVector.begin();
```

–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Iterator` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–±–æ–∏–º–∏ —Ç–∏–ø–∞–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤?

### –†–µ—à–µ–Ω–∏–µ: –ü–∞—Ç—Ç–µ—Ä–Ω "–ê–¥–∞–ø—Ç–µ—Ä"
–ê–¥–∞–ø—Ç–µ—Ä - —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω, –∫–æ—Ç–æ—Ä—ã–π:
1. –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–¥–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥—Ä—É–≥–æ–≥–æ
2. –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–ª–∞—Å—Å–∞–º–∏ —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
3. –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥–∞–ø—Ç–µ—Ä–∞ –¥–ª—è STL-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```cpp
template<typename ContainerType, typename ItemType>
class ConstIteratorAdapter : public Iterator<ItemType>
{
protected:
    ContainerType *Container;
    typename ContainerType::const_iterator It;

public:
    ConstIteratorAdapter(ContainerType *container)
    : Container(container)
    {
        It = Container->begin();
    }

    virtual ~ConstIteratorAdapter() {}
    
    virtual void First() override { 
        It = Container->begin(); 
    }
    
    virtual void Next() override { 
        It++; 
    }
    
    virtual bool IsDone() const override { 
        return (It == Container->end()); 
    }
    
    virtual ItemType GetCurrent() const override { 
        return *It; 
    }
};
```

#### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. **–®–∞–±–ª–æ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**:
   - `ContainerType`: –¢–∏–ø STL-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (list, vector –∏ —Ç.–¥.)
   - `ItemType`: –¢–∏–ø —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (Fruit*)

2. **–•—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**:
   ```cpp
   ContainerType *Container;  // –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –∞–¥–∞–ø—Ç–∏—Ä—É–µ–º—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
   ```
   - –ù–µ –≤–ª–∞–¥–µ–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º, —Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –Ω–µ–≥–æ

3. **STL-–∏—Ç–µ—Ä–∞—Ç–æ—Ä**:
   ```cpp
   typename ContainerType::const_iterator It;
   ```
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∏—Ç–µ—Ä–∞—Ç–æ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
   - `const_iterator` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ—Å—Ç—å —ç–ª–µ–º–µ–Ω—Ç–æ–≤

4. **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ Iterator**:
   - `First()`: –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏—Ç–µ—Ä–∞—Ç–æ—Ä –≤ –Ω–∞—á–∞–ª–æ (`begin()`)
   - `Next()`: –ü–µ—Ä–µ–º–µ—â–∞–µ—Ç –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç (`operator++`)
   - `IsDone()`: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –∫–æ–Ω—Ü–∞ (`end()`)
   - `GetCurrent()`: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —ç–ª–µ–º–µ–Ω—Ç (`operator*`)

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–¥–∞–ø—Ç–µ—Ä–∞ –≤ –∫–æ–¥–µ

#### 1. –°–æ–∑–¥–∞–Ω–∏–µ STL-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```cpp
list<Fruit*> fruitVector; // –∞ –µ—â–µ –º–æ–∂–Ω–æ vector, forward_list, ...
for(size_t i=0; i<N; i++)
{
	int fruit_num = rand()%3+1; // –ß–∏—Å–ª–æ –æ—Ç 1 –¥–æ 3 (—Å–ª—É—á–∞–π–Ω—ã–π —Ñ—Ä—É–∫—Ç)
	FruitType fruit_type = static_cast<FruitType>(fruit_num);
	Fruit *newFruit = CreateFruit(fruit_type);
	fruitVector.push_back(newFruit); // –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ñ—Ä—É–∫—Ç –≤ –∫–æ–Ω–µ—Ü —Å–ø–∏—Å–∫–∞
}
```

#### 2. –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–∞–ø—Ç–µ—Ä–∞
```cpp
Iterator<Fruit*> *adaptedIt = 
    new ConstIteratorAdapter<std::list<Fruit*>, Fruit*>(&fruitVector);
```

#### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞–º–∏
```cpp
Iterator<Fruit*> *adaptedOrangeIt = 
    new FruitGoodDecorator(
        new FruitColorDecorator(adaptedIt, FruitColor::Orange), 
        true
    );

EatEmAll(adaptedOrangeIt);
```

#### 4. –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
```cpp
delete adaptedOrangeIt; // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç –∞–¥–∞–ø—Ç–µ—Ä –∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ "–ê–¥–∞–ø—Ç–µ—Ä"

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è legacy-–∫–æ–¥–∞**:
   - –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π

2. **–†–∞–±–æ—Ç–∞ —Å–æ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏**:
   - –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –±–∏–±–ª–∏–æ—Ç–µ–∫ (STL, Boost –∏ —Ç.–¥.)

3. **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤**:
   - –£–ø—Ä–æ—â–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É, —Å–∫—Ä—ã–≤–∞—è —Ä–∞–∑–Ω–æ—Ä–æ–¥–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

4. **–°–æ–±–ª—é–¥–µ–Ω–∏–µ OCP**:
   - –ù–æ–≤—ã–µ —Ç–∏–ø—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –∫–æ–¥–∞

## –ó–∞–¥–∞–Ω–∏–µ:
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ –≤–æ –≤—Å–µ—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Ä–∞–Ω–µ–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ GetIterator, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏–≤ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –æ–±—â–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º (—Ç. –µ. —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –∏—Ö –æ—Ç –æ–¥–Ω–æ–≥–æ –æ–±—â–µ–≥–æ –∫–ª–∞—Å—Å–∞ —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π GetIterator).
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–∏–Ω–∏–º—É–º 3 –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–≤, –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∏—Ö —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å.
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ –≤ —Å—Ç–∏–ª–µ STL, –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å.
