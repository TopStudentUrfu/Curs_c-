# Лекция 5: Руководство по основам системы управления версиями Git

### Литература
- Чакон, Штрауб - Git для професиального программиста

## Задачи, которые решает Git
1. Возможность вернуться к прошлым версиям
2. Возможность параллельной работы с разными частями кода
3. Git - распределён система распространнений версий

## Основы устройства
> Хранимые git данные представляют собой набор состояние миниатюрной файловой системы, которые 

#### **Важные термины**  
- **Коммит (commit)**: точка сохранения изменений.  
- **Ветка (branch)**: изолированная линия разработки.  
- **Индексация (staging)**: подготовка файлов к коммиту.  
- **Рабочий каталог** - тот каталог с которым работает среда разработки, программист, компилятор и т.д.
- **Репозиторий** - специальная база данных для хранения файлов

## Состояние файлов
- зафиксированное (comited)
- измененное (modified)
- индексированное (indexed)

`Редактируем -> Индексируем -> Фиксируем`

## Базовый способ работы с git - командная строка

# Работа с Git
### **0. Настройка пользователя**  
Перед началом работы с Git нужно указать имя и email:
```bash
git config --global user.name "Ваше Имя"
git config --global user.email "ваш@email.com"
```

### **1. Инициализация репозитория**  
Для начала работы с Git необходимо инициализировать репозиторий в вашей рабочей директории.  
```bash  
cd /путь/к/проекту  
git init  
```  
Команда `git init` создает скрытую папку `.git`, где хранится история изменений и настройки.

---

### **2. Добавление файлов в отслеживание**  
Чтобы Git начал отслеживать изменения в файлах, используйте команду:  
```bash  
git add .            # добавляет все файлы  
git add filename.cpp # добавляет конкретный файл  
```  
Файлы переходят в состояние **«индексированные»** (modified).

---
### **3. Проверка состояния репозитория**  
Узнайте, какие файлы изменены, но не добавлены в коммит:  
```bash  
git status  
``` 
---

### **4. Фиксация изменений (коммит)**  
Зафиксируйте изменения с комментарием:  
```bash  
git commit -m "Добавлен новый функционал"  
```  
Коммиты сохраняют текущее состояние проекта в истории. Используйте понятные сообщения!

---

### **5. Игнорирование файлов**  
Создайте файл `.gitignore`, чтобы исключить ненужные файлы (логи, временные файлы):  
Создание файла:
```bash
touch .gitignore
```
Содержимое файла:
```  
*.log  
temp/  
test.cpp
```  
---

### **6. Переключение к заданному состоянию**  
```bash
git checkout b71653 //код состояния
```
---

### **7. Одновременная работа (удалённый репозиторий)**  
`Удалённый репозиторий не содрежит рабочего каталога`
- **Создание**:  
  ```bash  
  git init 
  ```  
- **Подключение**:  
  ```bash  
  git remote add oorigin <путь_к_каталогу>
  ```  
Комментарии: локальные пути пишутся так: `/C/Source/MyProject` (/C - это диск С:), `origin` - имя репозитория
- **Показать удалённый репозитории**:  
  ```bash  
  git remote 
  ```  
- **Отправка состояния в репозиторий**:  
  ```bash  
  git push origin master
  ```  
Комментарии: `origin` - имя репозитория, `master` - имя ветки
- **Обновление ветки локального репозитория с использованием информации из удаленного репозитория**
 ```bash
 git pull origin master
 ```

---

### **8. Клонирование удалённого репозитория**  
```bash
git clone <откуда(url)> <куда>
```
---



### **9. Работа с ветками**  
- **Создание ветки**:  
  ```bash  
  git branch feature/new-design  
  ```  
- **Переключение между ветками**:  
  ```bash  
  git checkout feature/new-design  
  ```  
- **Слияние веток**:  
  Перейдите в целевую ветку (например, `main`) и выполните:  
  ```bash  
  git merge feature/new-design  
  ```  
- **Удаление ветки**:
  ```bash
  git branch -d feature/old-design  # Локальная ветка
  git push origin --delete feature/old-design  # Удалённая ветка
  ```
---


## Графические инструменты
GUI-клиенты: GitKraken, Sourcetree, GitHub Desktop, TutroiseGit

Интеграция в IDE: Visual Studio, CLion, VS Code имеют встроенную поддержку Git.

## Задание:
Вам надо сделать следующее (в скобках указаны страницы книги, но в конспекте у вас тоже все должно быть):

1. Установить Git на свой компьютер (https://git-scm.com/downloads). Выполнить начальную настройку:
   ```
    git config --global user.email "you@example.com"
    git config --global user.name "Your Name"
   ```
3. Сделать на базе любой программы, которую вы мне сдали, репозиторий Git (с. 34-35). В репозиторий надо добавить файлы исходного кода (у большинства из вас он один) и служебные файлы проекта (для Code::Blocks это файл с расширением cbp). 
4. Путем создания в рабочей папке файла .gitignore удалить из области отслеживания все объектные файлы и исполняемый файл программы (с. 40). Для Code::Blocks это подкаталоги obj и bin. Сам файл .gitignore тоже надо добавить к области отслеживания. 
5. Сделать начальный коммит. 
6. Изменить что-нибудь в файле исходного кода. Убедиться, что Git видит, что файлы изменились. Добавить измененные файлы к области индексирования. Зафиксировать новое состояние проекта (сделать коммит). В принципе, можете несколько раз внести изменения и сделать несколько коммитов, только лучше разберетесь. 
7. Закрыть проект в среде разработки. 
8. Просмотреть внесенные в проект изменения (с. 47-48). 
9. Переключиться в предыдущее состояние проекта командой git checkout с указанием первых 4 символов хэша коммита, на который надо переключиться (например, git checkout b4f1). Открыть проект и убедиться, что содержимое измененного ранее файла стало первоначальным. 
10. Командой git checkout master переключиться обратно в актуальное состояние проекта (лучше при таких переключениях проект в среде разработки закрывать). 
11. Запаковать папку проекта в архив и приложить к заданию.
12. Установить TortoiseGit и осознать, насколько удобнее пользоваться программой с графическим интерфейсом.
13. Сделать скриншот лога в TortoiseGit и приложить к заданию.
